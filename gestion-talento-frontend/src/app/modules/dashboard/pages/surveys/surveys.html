<div class="page-container">
  <header class="page-header">
    <h2>Encuestas y Clima Laboral</h2>

    <button class="btn btn-primary" (click)="openCreateDialog()">
      <mat-icon>add</mat-icon>
      <span>Crear Nueva Encuesta</span>
    </button>
  </header>

  <div *ngIf="isLoading" style="padding: 20px; text-align: center;">
    Cargando encuestas...
  </div>

  <div *ngIf="!isLoading && surveys.length === 0" style="padding: 40px; text-align: center; color: #888;">
    No hay encuestas creadas.
  </div>

  <div class="survey-list" @listAnimation *ngIf="!isLoading && surveys.length > 0">
    <div class="survey-item header">
      <span>Título de la Encuesta</span>
      <span>Respuestas</span>
      <span>Fecha de Creación</span>
      <span>Estado</span>
      <span>Acciones</span>
    </div>

    <div *ngFor="let survey of surveys" class="survey-item">

      <span class="survey-title">{{ survey.titulo }}</span>

      <span>{{ getTotalVotes(survey) }} votos</span>

      <span>{{ survey.createdAt | date:'dd MMM, yyyy' }}</span>

      <div>
        <span class="status-badge" [ngClass]="survey.activa ? 'status-activa' : 'status-cerrada'">
          {{ survey.activa ? 'Activa' : 'Cerrada' }}
        </span>
      </div>

      <div class="actions">
        <button mat-icon-button class="btn-icon" title="Ver Resultados">
          <mat-icon>poll</mat-icon>
        </button>
        <button mat-icon-button class="btn-icon" title="Editar">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button class="btn-icon btn-danger" title="Eliminar" (click)="deleteSurvey(survey.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>

    </div>
  </div>
</div>