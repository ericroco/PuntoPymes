<div class="page-container">
    <header class="page-header">
        <h2>Mis Reportes de Gastos</h2>

        <button class="btn btn-primary" (click)="openCreateDialog()">
            <mat-icon>add</mat-icon>
            <span>Nuevo Reporte</span>
        </button>
    </header>

    <!-- Loading State -->
    <div *ngIf="isLoading" style="padding: 80px 20px; text-align: center;">
        <mat-spinner diameter="40" style="margin: 0 auto 20px;"></mat-spinner>
        <p style="color: #888; margin: 0;">Cargando información...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && reports.length === 0"
        style="padding: 80px 20px; text-align: center; max-width: 500px; margin: 0 auto;">
        <div
            style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%); display: flex; align-items: center; justify-content: center; margin: 0 auto 24px;">
            <mat-icon style="font-size: 40px; width: 40px; height: 40px; color: #888;">receipt_long</mat-icon>
        </div>
        <h3 style="margin: 0 0 12px; font-size: 22px; font-weight: 600;">No tienes reportes</h3>
        <p style="color: #888; margin: 0 0 28px; font-size: 1rem; line-height: 1.6;">Crea tu primer reporte para
            comenzar a registrar tus viáticos y solicitar reembolsos.</p>
        <button class="btn btn-primary" (click)="openCreateDialog()">
            <mat-icon>add_circle</mat-icon>
            <span>Crear Reporte</span>
        </button>
    </div>

    <!-- Table -->
    <div class="table-list" *ngIf="!isLoading && reports.length > 0">
        <!-- Header -->
        <div class="table-item header">
            <span>Reporte</span>
            <span>Fecha</span>
            <span>Total</span>
            <span>Estado</span>
            <span>Acciones</span>
        </div>

        <!-- Rows -->
        <div *ngFor="let report of reports" class="table-item">

            <!-- Reporte Info -->
            <div class="report-info">
                <span class="title">{{ report.titulo }}</span>
                <span class="desc">{{ report.descripcion }}</span>
            </div>

            <!-- Fecha -->
            <span class="text-muted">{{ report.createdAt | date:'dd MMM, yyyy' }}</span>

            <!-- Total -->
            <span class="amount-text">{{ report.total | currency }}</span>

            <!-- Estado -->
            <div>
                <span class="status-badge" [ngClass]="'status-' + report.estado.toLowerCase()">
                    {{ report.estado | titlecase }}
                </span>
            </div>

            <!-- Acciones -->
            <div class="actions">
                <button mat-icon-button class="btn-icon" (click)="goToDetail(report.id)"
                    [title]="report.estado === 'BORRADOR' ? 'Editar' : 'Ver Detalle'">
                    <mat-icon>{{ report.estado === 'BORRADOR' ? 'edit' : 'visibility' }}</mat-icon>
                </button>
            </div>

        </div>
    </div>
</div>