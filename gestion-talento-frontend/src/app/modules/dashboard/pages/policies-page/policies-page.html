<div class="page-container">
    <header class="page-header">
        <h2>Políticas y Normativas</h2>

        <button class="btn btn-primary" *ngIf="canManagePolicies" (click)="openUploadDialog()">
            <mat-icon>add</mat-icon>
            <span>Nueva Política</span>
        </button>
    </header>

    <!-- Empty State -->
    <div *ngIf="dataSource.length === 0" style="padding: 80px 20px; text-align: center;">
        <div
            style="width: 72px; height: 72px; border-radius: 50%; background: #F3F4F6; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
            <mat-icon style="font-size: 36px; width: 36px; height: 36px; color: #888;">policy</mat-icon>
        </div>
        <h3 style="margin: 0 0 8px; font-size: 1.25rem; font-weight: 600;">Sin documentos</h3>
        <p style="color: #888; margin: 0 0 24px;">No hay políticas publicadas en este momento.</p>
        <button class="btn btn-primary" *ngIf="canManagePolicies" (click)="openUploadDialog()">
            <mat-icon>upload_file</mat-icon>
            <span>Subir el primero</span>
        </button>
    </div>

    <!-- Table -->
    <div class="table-list" *ngIf="dataSource.length > 0">
        <!-- Header -->
        <div class="table-item header">
            <span>Tipo</span>
            <span>Documento</span>
            <span>Categoría</span>
            <span>Publicado</span>
            <span>Acciones</span>
        </div>

        <!-- Rows -->
        <div *ngFor="let doc of dataSource" class="table-item">

            <!-- Tipo (Icono) -->
            <div class="doc-icon-wrapper">
                <mat-icon class="doc-icon" [class.pdf]="isPdf(doc.nombre)">
                    {{ isPdf(doc.nombre) ? 'picture_as_pdf' : 'description' }}
                </mat-icon>
            </div>

            <!-- Nombre -->
            <span class="doc-name">{{ doc.nombre }}</span>

            <!-- Categoría -->
            <div>
                <span class="category-badge">{{ doc.categoria }}</span>
            </div>

            <!-- Fecha -->
            <span class="text-muted">{{ doc.fechaSubida | date:'dd MMM, yyyy' }}</span>

            <!-- Acciones -->
            <div class="actions">
                <button mat-icon-button class="btn-icon" (click)="download(doc.url)" title="Ver Documento">
                    <mat-icon>visibility</mat-icon>
                </button>

                <button mat-icon-button class="btn-icon btn-danger" *ngIf="canManagePolicies"
                    (click)="deleteDoc(doc.id)" title="Eliminar">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>

        </div>
    </div>
</div>