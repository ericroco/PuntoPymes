<div class="settings-subpage-container">
  <app-subpage-header title="Estructura Organizacional" backRoute="/dashboard/settings">
  </app-subpage-header>

  <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" animationDuration="0ms">

    <mat-tab label="Cargos y Salarios">
      <div class="tab-content">

        <div class="actions-bar">
          <p class="description">
            Define los cargos oficiales, sus departamentos y rangos salariales.
          </p>
          <button mat-flat-button color="primary" (click)="openJobDialog()">
            <mat-icon>add_circle_outline</mat-icon>
            Nuevo Cargo
          </button>
        </div>

        <div class="list-container">
          <div class="list-item header">
            <span>Nombre del Cargo</span>
            <span>Departamento</span>
            <span>Mínimo</span>
            <span>Máximo</span>
            <span class="actions-header">Acciones</span>
          </div>

          <div *ngFor="let job of jobs" class="list-item">
            <span class="job-name">{{ job.nombre }}</span>

            <span>{{ job.departamento?.nombre || '---' }}</span>

            <span class="salary">{{ job.salarioMin | currency:'USD':'symbol':'1.0-0' }}</span>
            <span class="salary">{{ job.salarioMax | currency:'USD':'symbol':'1.0-0' }}</span>

            <div class="actions">
              <button mat-icon-button matTooltip="Editar Cargo" (click)="openJobDialog(job)">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button color="warn" matTooltip="Eliminar Cargo" (click)="deleteJob(job)">
                <mat-icon>delete_outline</mat-icon>
              </button>
            </div>
          </div>

          <div *ngIf="jobs.length === 0" class="empty-list-placeholder">
            No hay cargos definidos aún.
          </div>
        </div>

      </div>
    </mat-tab>

    <mat-tab label="Departamentos">
      <div class="tab-content">

        <div class="actions-bar">
          <p class="description">
            Gestiona las áreas funcionales de tu empresa (Marketing, TI, RRHH).
          </p>
          <button mat-flat-button color="primary" (click)="openDepartmentDialog()">
            <mat-icon>domain_add</mat-icon>
            Nuevo Departamento
          </button>
        </div>

        <div class="list-container">
          <div class="list-item header department-header">
            <span>Nombre del Departamento</span>
            <span>Descripción</span>
            <span class="actions-header">Acciones</span>
          </div>

          <div *ngFor="let dept of departments" class="list-item department-item">

            <span class="job-name">{{ dept.nombre }}</span>

            <span class="dept-desc">{{ dept.descripcion || '---' }}</span>

            <div class="actions">
              <button mat-icon-button matTooltip="Editar Departamento" (click)="openDepartmentDialog(dept)">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button color="warn" matTooltip="Eliminar Departamento" (click)="deleteDepartment(dept)">
                <mat-icon>delete_outline</mat-icon>
              </button>
            </div>
          </div>

          <div *ngIf="departments.length === 0" class="empty-list-placeholder">
            No hay departamentos creados.
          </div>
        </div>

      </div>
    </mat-tab>

  </mat-tab-group>
</div>