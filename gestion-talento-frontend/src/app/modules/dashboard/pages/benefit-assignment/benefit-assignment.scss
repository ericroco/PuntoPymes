/* ==========================================================================
   TALENTRACK - BENEFIT ASSIGNMENT (DUAL LIST)
   ========================================================================== */

// --- 1. CONFIGURACIÓN DE PÁGINA ---
.page-container {
  padding: var(--spacing-xl);
  max-width: 100%;
  margin: 0 auto;
  animation: fadeIn 0.4s ease-out;
  padding-bottom: 100px; // Espacio para footer
}

// Descripción
.description {
  color: var(--color-text-secondary);
  margin-bottom: var(--spacing-xl);
  font-size: 0.95rem;
  max-width: 800px;
  line-height: 1.5;
}

// Overlay de Carga
.loading-overlay {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 50vh;
  gap: 20px;
  color: var(--color-text-muted);
  font-size: 1rem;
  
  mat-spinner {
    ::ng-deep circle { stroke: var(--color-primary); }
  }
}

// --- 2. CONTENEDOR PRINCIPAL (GRID) ---
.dual-list-container {
  display: grid;
  // 3 columnas: Lista | Botones | Lista
  grid-template-columns: 1fr 80px 1fr; 
  gap: var(--spacing-lg);
  align-items: center;
  height: 65vh;
  min-height: 500px;

  // Responsive: Stack vertical
  @media (max-width: 900px) {
    grid-template-columns: 1fr;
    grid-template-rows: 1fr auto 1fr;
    height: auto;
    gap: var(--spacing-md);
  }
}

// --- 3. COLUMNA DE LISTA (TARJETA) ---
.list-column {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  
  // FIX: Fondo Blanco Explícito para quitar el "rojo"
  background-color: var(--color-surface); 
  border-radius: var(--border-radius-lg);
  border: 1px solid var(--color-border-light);
  box-shadow: var(--shadow-sm);
  transition: box-shadow 0.3s ease;

  &:hover {
    box-shadow: var(--shadow-md);
  }

  // Header de la tarjeta
  mat-card-header {
    padding: var(--spacing-md) var(--spacing-md) 0.5rem;
    border-bottom: 1px solid var(--color-border-light);
    background-color: var(--color-surface); // Asegurar fondo blanco en header
  }

  mat-card-title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--color-text-primary);
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    margin: 0;
  }

  // Badges de conteo
  .count-badge {
    background-color: var(--color-surface-variant);
    color: var(--color-text-secondary);
    font-size: 0.75rem;
    padding: 2px 10px;
    border-radius: 12px;
    font-weight: 600;

    &.success {
      background-color: var(--color-success-light);
      color: var(--color-success-dark);
    }
  }

  // Input de Búsqueda (Estilo compacto y limpio) - ACTUALIZADO CON FONDO MÁS OSCURO
  .filter-input {
    width: 100%;
    padding: 0.75rem 1rem 0;

    ::ng-deep .mat-mdc-form-field-subscript-wrapper { display: none; } // Quitar espacio extra

    ::ng-deep .mat-mdc-text-field-wrapper {
      height: 40px; // Más compacto que el estándar
      padding: 0 12px;
      background-color: #E5E7EB; // CAMBIADO: Gris más oscuro (antes era surface-variant muy claro)
      border-radius: 8px;
      display: flex;
      align-items: center;
      border: 1px solid transparent;

      &.mdc-text-field--focused {
        background-color: white;
        border-color: var(--color-primary);
        box-shadow: 0 0 0 2px var(--color-primary-subtle);
      }

      .mdc-notched-outline { display: none; } // Quitar borde default
    }

    ::ng-deep .mat-mdc-form-field-flex {
      height: 100%;
      align-items: center;
    }

    ::ng-deep input { 
      margin-top: 0; 
      font-size: 0.9rem;
      color: var(--color-text-primary); // Asegurar que el texto sea oscuro
    }
    
    mat-icon { font-size: 20px; width: 20px; height: 20px; color: var(--color-text-secondary); } // Ícono más visible
  }
}

// --- 4. LISTA SCROLLABLE INTERNA ---
.employee-list {
  flex-grow: 1;
  overflow-y: auto;
  margin-top: 0.5rem;

  // Estilo de los items
  mat-list-option {
    height: auto !important;
    padding: 8px 0;
    border-bottom: 1px solid var(--color-border-light);
    transition: background-color 0.2s;

    &:hover {
      background-color: var(--color-surface-variant);
    }

    // Texto del item
    div[matListItemTitle] {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--color-text-primary);
    }

    .dept-text {
      font-size: 0.8rem;
      color: var(--color-text-muted);
    }
  }

  // Placeholder vacío
  .no-data-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 3rem 1rem;
    color: var(--color-text-muted);
    font-style: italic;
    gap: 10px;
    opacity: 0.7;

    mat-icon {
      font-size: 32px;
      width: 32px;
      height: 32px;
    }
  }
}

// --- 5. COLUMNA DE BOTONES (CENTRAL) - ACTUALIZADO ---
.actions-column {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;

  .spacer { height: 24px; }

  // Estilo común de botones
  button[mat-mini-fab] {
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    transition: all 0.2s ease;

    mat-icon { font-size: 20px; }

    &:disabled {
      background-color: var(--color-surface-variant);
      color: var(--color-text-disabled);
      box-shadow: none;
    }
  }

  // ACTUALIZADO: TODOS los botones ahora usan el color primario personalizado
  button[color="primary"],
  button[color="warn"] {
    background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)) !important;
    color: white !important;
    border: none !important;

    &:not(:disabled):hover {
      transform: scale(1.05); // Efecto de zoom sutil
      box-shadow: 0 6px 14px rgba(var(--color-primary-rgb), 0.4);
    }

    &:not(:disabled):active {
      transform: scale(0.98);
    }
  }

  // Responsive Móvil
  @media (max-width: 900px) {
    flex-direction: row;
    justify-content: center;
    padding: 1rem 0;

    button mat-icon { transform: rotate(90deg); } // Rotar flechas
    .spacer { width: 24px; height: 0; }
  }
}

// --- 6. FOOTER DE ACCIONES ---
.actions-footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: var(--color-surface);
  border-top: 1px solid var(--color-border);
  padding: var(--spacing-md) var(--spacing-xl);
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  z-index: 90;
  box-shadow: 0 -4px 20px rgba(0,0,0,0.05);

  @media (min-width: 1024px) {
    padding-left: calc(280px + var(--spacing-xl)); 
  }

  button[mat-flat-button] {
    background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
    color: white;
    border-radius: 24px;
    padding: 0 24px;
    height: 48px;
    font-weight: 600;
    
    mat-icon { margin-right: 8px; }
  }

  button[mat-stroked-button] {
    border-radius: 12px;
    height: 48px;
    color: var(--color-text-secondary);
    border-color: var(--color-border-dark);
  }
}

// Animación
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}