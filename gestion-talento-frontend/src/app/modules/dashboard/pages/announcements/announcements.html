<div class="page-container feed-page">

    <header class="page-header">
        <div class="header-text">
            <h2>Tablero de Comunicados</h2>
            <p class="subtitle">Noticias y actualizaciones importantes de la empresa.</p>
        </div>

        <button *ngIf="canCreate" mat-flat-button color="primary" (click)="openCreateDialog()">
            <mat-icon>add</mat-icon> Nuevo Anuncio
        </button>
    </header>

    <div class="feed-container">

        <div *ngIf="isLoading" class="loading-state">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Cargando comunicados...</p>
        </div>

        <div *ngIf="!isLoading && anuncios.length === 0" class="empty-state">
            <div class="icon-wrapper">
                <mat-icon>campaign</mat-icon>
            </div>
            <h3>No hay comunicados recientes</h3>
            <p>Todo está tranquilo por aquí.</p>
        </div>

        <mat-card *ngFor="let anuncio of anuncios" class="anuncio-card" [ngClass]="'priority-' + anuncio.prioridad">

            <mat-card-header>
                <div mat-card-avatar class="anuncio-avatar">
                    <mat-icon>notifications_active</mat-icon>
                </div>

                <mat-card-title>{{ anuncio.titulo }}</mat-card-title>

                <mat-card-subtitle>
                    <span class="date">{{ anuncio.createdAt | date:'mediumDate' }}</span>

                    <span *ngIf="!anuncio.sucursalId" class="location-badge global">
                        <mat-icon>public</mat-icon> Global
                    </span>
                    <span *ngIf="anuncio.sucursalId" class="location-badge local">
                        <mat-icon>place</mat-icon> {{ anuncio.sucursal?.nombre || 'Mi Sede' }}
                    </span>
                </mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
                <p class="anuncio-content">{{ anuncio.contenido }}</p>
            </mat-card-content>

            <mat-card-actions align="end">
                <span class="priority-badge" [ngClass]="anuncio.prioridad">
                    {{ anuncio.prioridad }}
                </span>
            </mat-card-actions>

        </mat-card>

    </div>
</div>