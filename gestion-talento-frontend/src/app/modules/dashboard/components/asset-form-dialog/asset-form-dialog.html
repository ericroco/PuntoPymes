<div class="dialog-container">

    <div class="dialog-header">
        <h2 mat-dialog-title>
            {{ isEditing ? 'Editar Activo' : 'Registrar Nuevo Activo' }}
        </h2>
        <button type="button" mat-icon-button class="close-btn" mat-dialog-close>
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <mat-dialog-content class="asset-dialog-content" style="overflow-x: hidden;">

        <form [formGroup]="form" class="asset-form">

            <div class="form-grid">

                <mat-form-field appearance="outline" class="full-width custom-field">
                    <mat-label>Nombre del Equipo / Activo</mat-label>
                    <input matInput formControlName="nombre" placeholder="Ej: Laptop Dell Latitude">
                    <mat-icon matSuffix>devices</mat-icon>
                    <mat-error *ngIf="form.get('nombre')?.hasError('required')">Requerido</mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" class="custom-field">
                    <mat-label>Categoría / Tipo</mat-label>
                    <input matInput formControlName="tipo" placeholder="Ej: Computación">
                    <mat-icon matSuffix>category</mat-icon>
                    <mat-error *ngIf="form.get('tipo')?.hasError('required')">Requerido</mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" class="custom-field">
                    <mat-label>Serial / Código</mat-label>
                    <input matInput formControlName="serial" placeholder="S/N...">
                    <mat-icon matSuffix>qr_code</mat-icon>
                </mat-form-field>

                <mat-form-field appearance="outline" class="custom-field">
                    <mat-label>Estado Inicial</mat-label>
                    <mat-select formControlName="estado">
                        <mat-option *ngFor="let status of assetStatuses" [value]="status">
                            {{ status }}
                        </mat-option>
                    </mat-select>
                    <mat-icon matSuffix>info</mat-icon>
                </mat-form-field>

                <mat-form-field appearance="outline" class="custom-field">
                    <mat-label>Valor (USD)</mat-label>
                    <input matInput type="number" formControlName="valor" placeholder="0.00">
                    <mat-icon matSuffix>attach_money</mat-icon>
                </mat-form-field>

                <mat-form-field appearance="outline" class="custom-field">
                    <mat-label>Fecha Adquisición</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="fechaAdquisicion" readonly
                        (click)="picker.open()">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width custom-field">
                    <mat-label>URL Imagen (Opcional)</mat-label>
                    <input matInput formControlName="imageUrl" placeholder="https://...">
                    <mat-icon matSuffix>image</mat-icon>
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width custom-field">
                    <mat-label>Descripción / Notas</mat-label>
                    <textarea matInput formControlName="descripcion" rows="3"
                        placeholder="Detalles técnicos..."></textarea>
                    <mat-icon matSuffix style="align-self: start; margin-top: 8px;">description</mat-icon>
                </mat-form-field>

            </div>

        </form>

    </mat-dialog-content>

    <div class="dialog-footer">
        <button mat-stroked-button mat-dialog-close class="btn-cancel">Cancelar</button>
        <button mat-flat-button color="primary" (click)="onSubmit()" [disabled]="isLoading || form.invalid"
            class="btn-save">
            <mat-icon>save</mat-icon> {{ isEditing ? 'Guardar Cambios' : 'Crear Activo' }}
        </button>
    </div>

</div>