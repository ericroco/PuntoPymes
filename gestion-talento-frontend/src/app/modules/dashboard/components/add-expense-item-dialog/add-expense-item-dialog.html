<div class="dialog-container">

    <div class="dialog-header">
        <h2 mat-dialog-title>Registrar Gasto</h2>
        <button type="button" mat-icon-button class="close-btn" mat-dialog-close>
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <mat-dialog-content class="simple-dialog-content">

        <form [formGroup]="form" class="simple-form">

            <div class="form-row">
                <mat-form-field appearance="outline" class="custom-field form-field">
                    <mat-label>Fecha</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="fecha" readonly (click)="picker.open()">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>

                <mat-form-field appearance="outline" class="custom-field form-field">
                    <mat-label>Monto</mat-label>
                    <input matInput type="number" formControlName="monto" placeholder="0.00" min="0">
                    <mat-icon matSuffix>attach_money</mat-icon>
                </mat-form-field>
            </div>

            <mat-form-field appearance="outline" class="full-width custom-field">
                <mat-label>Categor√≠a</mat-label>
                <mat-select formControlName="categoria">
                    <mat-option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</mat-option>
                </mat-select>
                <mat-icon matSuffix>category</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width custom-field">
                <mat-label>Concepto / Detalle</mat-label>
                <input matInput formControlName="concepto" placeholder="Ej: Taxi al aeropuerto">
                <mat-icon matSuffix>description</mat-icon>
            </mat-form-field>

            <div class="file-upload-area" (click)="fileInput.click()" [class.has-file]="!!selectedFile">

                <div class="icon-wrapper">
                    <mat-icon>{{ selectedFile ? 'check_circle' : 'cloud_upload' }}</mat-icon>
                </div>

                <div class="upload-text">
                    <span class="main-text">
                        {{ selectedFile ? selectedFile.name : 'Adjuntar Factura o Recibo' }}
                    </span>
                    <span class="sub-text" *ngIf="!selectedFile">
                        Click para explorar (.pdf, .jpg, .png)
                    </span>
                </div>

                <input #fileInput type="file" (change)="onFileSelected($event)" style="display: none;"
                    accept=".pdf,.jpg,.jpeg,.png">
            </div>

        </form>

    </mat-dialog-content>

    <div class="dialog-footer">
        <button mat-stroked-button mat-dialog-close class="btn-cancel">Cancelar</button>
        <button mat-flat-button color="primary" (click)="onSubmit()" [disabled]="form.invalid" class="btn-save">
            <mat-icon>save</mat-icon> Guardar Gasto
        </button>
    </div>

</div>