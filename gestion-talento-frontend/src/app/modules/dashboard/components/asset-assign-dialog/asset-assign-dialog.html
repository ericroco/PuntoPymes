<h2 mat-dialog-title>Asignaci√≥n de Activo</h2>

<div class="asset-summary">
    <div class="summary-icon">üíª</div>
    <div class="summary-details">
        <span class="label">Est√°s asignando:</span>
        <span class="value">{{ data.asset.nombre }}</span>
        <span class="sub-value" *ngIf="data.asset.serial">S/N: {{ data.asset.serial }}</span>
    </div>
</div>

<mat-dialog-content [formGroup]="form">
    <div class="form-column">

        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Buscar Empleado</mat-label>
            <input type="text" matInput formControlName="empleadoSeleccionado" [matAutocomplete]="auto"
                placeholder="Escribe para buscar...">
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn"
                (optionSelected)="onOptionSelected($event)">
                <mat-option *ngFor="let emp of filteredEmployees$ | async" [value]="emp">
                    <div class="employee-option">
                        <span class="emp-name">{{ emp.nombre }} {{ emp.apellido }}</span>
                        <small class="emp-cargo" *ngIf="emp.cargo"> - {{ emp.cargo }}</small>
                    </div>
                </mat-option>
            </mat-autocomplete>
            <mat-error *ngIf="form.get('empleadoSeleccionado')?.hasError('required')">
                Debes seleccionar un responsable
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Fecha de Entrega</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="fechaAsignacion">
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Observaciones / Estado F√≠sico</mat-label>
            <textarea matInput formControlName="observaciones" rows="3"
                placeholder="Ej: Se entrega con cargador, mouse y funda. Pantalla sin rayones."></textarea>
            <mat-hint>Detalla qu√© accesorios entregas para evitar reclamos luego.</mat-hint>
        </mat-form-field>

    </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancelar</button>
    <button mat-flat-button color="primary" (click)="onSubmit()" [disabled]="isLoading || form.invalid">
        Confirmar Asignaci√≥n
    </button>
</mat-dialog-actions>