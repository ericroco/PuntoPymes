<div class="auth-container">

    <div class="auth-visual">
        <div class="texture-overlay"></div>
        <div class="visual-content">
            <div class="logo-section">
                <div class="logo-white">
                    <mat-icon>security</mat-icon> <span>SEGURIDAD</span>
                </div>
            </div>

            <h2>Recupera el<br>Acceso</h2>
            <p class="visual-text">
                Establece una nueva contraseña segura para proteger tu cuenta y continuar gestionando tu talento.
            </p>

            <div class="circle c1"></div>
            <div class="circle c2"></div>
        </div>
    </div>

    <div class="auth-form-wrapper">
        <div class="auth-form-content">

            <div class="form-header">
                <h1>Nueva Contraseña</h1>
                <p>Ingresa tu nueva clave de acceso.</p>
            </div>

            <form [formGroup]="form" (ngSubmit)="onSubmit()">

                <div class="form-group">
                    <mat-form-field appearance="outline">
                        <mat-label>Nueva Contraseña</mat-label>
                        <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
                        <mat-icon matPrefix>lock_reset</mat-icon>
                        <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
                            <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                        <mat-error *ngIf="form.get('password')?.hasError('required')">Requerido</mat-error>
                        <mat-error *ngIf="form.get('password')?.hasError('minlength')">Mínimo 6 caracteres</mat-error>
                    </mat-form-field>
                </div>

                <div class="form-group">
                    <mat-form-field appearance="outline">
                        <mat-label>Confirmar Contraseña</mat-label>
                        <input matInput [type]="hideConfirmPassword ? 'password' : 'text'"
                            formControlName="confirmPassword">
                        <mat-icon matPrefix>lock</mat-icon>
                        <button mat-icon-button matSuffix (click)="hideConfirmPassword = !hideConfirmPassword"
                            type="button">
                            <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                        <mat-error *ngIf="form.hasError('mismatch') && form.get('confirmPassword')?.touched">
                            Las contraseñas no coinciden
                        </mat-error>
                    </mat-form-field>
                </div>

                <button mat-flat-button type="submit" class="submit-btn" [disabled]="form.invalid || isLoading">
                    <span *ngIf="!isLoading">Cambiar Contraseña</span>
                    <mat-spinner diameter="24" *ngIf="isLoading"></mat-spinner>
                </button>

                <div class="register-redirect">
                    <a routerLink="/auth/login" class="link">Volver al Login</a>
                </div>

            </form>
        </div>
    </div>
</div>