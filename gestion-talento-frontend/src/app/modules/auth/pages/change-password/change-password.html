<div class="auth-container">

    <div class="auth-visual">
        <div class="texture-overlay"></div>

        <div class="visual-content">

            <div class="logo-section">
                <div class="logo-white">
                    <mat-icon>all_inclusive</mat-icon>
                    <span>TALEN<strong>TRACK</strong></span>
                </div>
            </div>

            <h2>
                Seguridad<br>
                Primero
            </h2>

            <p class="visual-text">
                Mantener tu cuenta segura es vital para proteger la información
                confidencial de tu organización.
            </p>

            <div class="features-grid">
                <div class="feature-item">
                    <div class="icon-box">
                        <mat-icon>lock</mat-icon>
                    </div>
                    <div class="feature-text">
                        <span class="feature-title">Encriptación</span>
                        <span class="feature-desc">Datos protegidos</span>
                    </div>
                </div>

                <div class="feature-item">
                    <div class="icon-box">
                        <mat-icon>admin_panel_settings</mat-icon>
                    </div>
                    <div class="feature-text">
                        <span class="feature-title">Privacidad</span>
                        <span class="feature-desc">Solo tú accedes</span>
                    </div>
                </div>

                <div class="feature-item">
                    <div class="icon-box">
                        <mat-icon>verified_user</mat-icon>
                    </div>
                    <div class="feature-text">
                        <span class="feature-title">Cumplimiento</span>
                        <span class="feature-desc">Normas ISO</span>
                    </div>
                </div>
            </div>

            <div class="glass-card-mockup">
                <div class="card-icon">
                    <mat-icon>gpp_good</mat-icon>
                </div>
                <div class="card-info">
                    <span class="card-title">Estado de Cuenta</span>
                    <span class="card-subtitle">Protegido</span>
                </div>
                <div class="card-status">
                    <mat-icon>check_circle</mat-icon>
                </div>
            </div>

        </div>

        <div class="circle c1"></div>
        <div class="circle c2"></div>
    </div>

    <div class="auth-form-wrapper">
        <div class="auth-form-content">

            <div class="form-header">
                <div class="logo-mobile">
                    <mat-icon>all_inclusive</mat-icon>
                    <span>TALEN<strong>TRACK</strong></span>
                </div>

                <h1>Cambiar Contraseña</h1>
                <p>Actualiza tus credenciales para continuar operando</p>
            </div>

            <form [formGroup]="changePassForm" (ngSubmit)="onSubmit()">

                <div class="form-group">
                    <mat-form-field appearance="outline">
                        <mat-label>Contraseña Actual</mat-label>
                        <input matInput [type]="hideCurrent ? 'password' : 'text'" formControlName="passwordActual"
                            autocomplete="current-password">
                        <mat-icon matPrefix>key</mat-icon>
                        <button mat-icon-button matSuffix (click)="hideCurrent = !hideCurrent" type="button"
                            tabindex="-1">
                            <mat-icon>{{hideCurrent ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                        <mat-error *ngIf="changePassForm.get('passwordActual')?.hasError('required')">
                            Requerido para verificar tu identidad
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="form-group">
                    <mat-form-field appearance="outline">
                        <mat-label>Nueva Contraseña</mat-label>
                        <input matInput [type]="hideNew ? 'password' : 'text'" formControlName="nuevaPassword"
                            autocomplete="new-password">
                        <mat-icon matPrefix>lock_reset</mat-icon>
                        <button mat-icon-button matSuffix (click)="hideNew = !hideNew" type="button" tabindex="-1">
                            <mat-icon>{{hideNew ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                        <mat-error *ngIf="changePassForm.get('nuevaPassword')?.hasError('required')">
                            La nueva contraseña es requerida
                        </mat-error>
                        <mat-error *ngIf="changePassForm.get('nuevaPassword')?.hasError('minlength')">
                            Mínimo 6 caracteres
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="form-group">
                    <mat-form-field appearance="outline">
                        <mat-label>Confirmar Nueva Contraseña</mat-label>
                        <input matInput [type]="hideConfirm ? 'password' : 'text'" formControlName="confirmPassword"
                            autocomplete="new-password">
                        <mat-icon matPrefix>lock</mat-icon>
                        <button mat-icon-button matSuffix (click)="hideConfirm = !hideConfirm" type="button"
                            tabindex="-1">
                            <mat-icon>{{hideConfirm ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                        <mat-error
                            *ngIf="changePassForm.hasError('mismatch') && changePassForm.get('confirmPassword')?.touched">
                            Las contraseñas no coinciden
                        </mat-error>
                    </mat-form-field>
                </div>

                <button mat-flat-button type="submit" class="submit-btn"
                    [disabled]="changePassForm.invalid || isLoading">
                    <span *ngIf="!isLoading">Actualizar Contraseña</span>
                    <mat-spinner diameter="24" *ngIf="isLoading"></mat-spinner>
                </button>

                <div class="register-redirect">
                    <a (click)="goBack()" class="link" style="cursor: pointer;">
                        <mat-icon
                            style="font-size: 16px; height: 16px; width: 16px; vertical-align: middle;">arrow_back</mat-icon>
                        Volver al Inicio
                    </a>
                </div>

            </form>

        </div>
    </div>

</div>