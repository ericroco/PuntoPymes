<div class="hub-container">

    <!-- HERO ROJO CON HEADER DENTRO -->
    <div class="hub-visual-bg">
        <div class="texture-overlay"></div>
        <div class="circle c1"></div>
        <div class="circle c2"></div>
        <div class="circle c3"></div>

        <!-- HEADER DENTRO DEL ÁREA ROJA -->
        <header class="hub-header animate-fade-down">
            <div class="brand-pill">
                <mat-icon>all_inclusive</mat-icon> TALEN<strong>TRACK</strong>
            </div>

            <div class="user-greeting">
                <h1>Hola, {{ userName }}</h1>
                <p>Bienvenido a tu centro de control. Selecciona un espacio de trabajo para comenzar.</p>
            </div>

            <div class="user-profile-widget">
                <div class="avatar-circle">
                    {{ userName.charAt(0).toUpperCase() }}
                </div>
                <div class="user-meta">
                    <span class="status-indicator"></span>
                    <span class="active-text">Sesión Activa</span>
                </div>
                <button mat-icon-button (click)="logout()" matTooltip="Cerrar Sesión">
                    <mat-icon>logout</mat-icon>
                </button>
            </div>
        </header>
    </div>

    <!-- ZONA BLANCA CON TARJETAS -->
    <div class="hub-content">

        <div class="workspaces-grid">

            <div *ngFor="let m of memberships; let i = index" class="workspace-card animate-fade-up"
                [style.animation-delay]="i * 100 + 'ms'" (click)="selectCompany(m)">

                <div class="card-glow" [style.background]="m.empresa.branding?.primaryColor || '#E74C3C'"></div>

                <div class="card-body">
                    <div class="company-brand">
                        <div class="company-avatar" [style.background]="m.empresa.branding?.primaryColor || '#E74C3C'">
                            {{ m.empresa.nombre.charAt(0).toUpperCase() }}
                        </div>
                        <div class="company-meta">
                            <h3>{{ m.empresa.nombre }}</h3>
                            <span class="role-tag">{{ m.rol.nombre }}</span>
                        </div>
                    </div>

                    <div class="card-details">
                        <div class="detail-row">
                            <mat-icon>badge</mat-icon>
                            <span>{{ m.cargo?.nombre || 'Miembro' }}</span>
                        </div>
                        <div class="detail-row">
                            <mat-icon>group</mat-icon>
                            <span>Espacio de Trabajo</span>
                        </div>
                    </div>
                </div>

                <div class="card-footer">
                    <span class="enter-text">Ingresar</span>
                    <mat-icon class="arrow-icon">arrow_forward</mat-icon>
                </div>
            </div>

            <div class="workspace-card create-card animate-fade-up"
                [style.animation-delay]="memberships.length * 100 + 'ms'" (click)="goToCreateCompany()">

                <div class="card-body centered">
                    <div class="add-icon-circle">
                        <mat-icon>add</mat-icon>
                    </div>
                    <h3>Nueva Organización</h3>
                    <p>Registra una nueva empresa y configura tu equipo desde cero.</p>
                </div>

                <div class="card-footer">
                    <span class="enter-text">Comenzar</span>
                    <mat-icon class="arrow-icon">arrow_forward</mat-icon>
                </div>
            </div>

        </div>

        <footer class="hub-footer">
            <p>© 2025 TalenTrack. Gestión de Recursos Humanos Inteligente.</p>
        </footer>

    </div>
</div>