// Include theming for Angular Material with `mat.theme()`.
// This Sass mixin will define CSS variables that are used for styling Angular Material
// components according to the Material 3 design spec.
// Learn more about theming and how to use it for your application's
// custom components at https://material.angular.dev/guide/theming
@use '@angular/material' as mat;

html {
  @include mat.theme((color: (primary: mat.$cyan-palette,
        tertiary: mat.$orange-palette,
      ),
      typography: Roboto,
      density: 0,
    ));
}

body {
  // Default the application to a light color theme. This can be changed to
  // `dark` to enable the dark color theme, or to `light dark` to defer to the
  // user's system settings.
  color-scheme: light;

  // Set a default background, font and text colors for the application using
  // Angular Material's system-level CSS variables. Learn more about these
  // variables at https://material.angular.dev/guide/system-variables
  background-color: var(--mat-sys-surface);
  color: var(--mat-sys-on-surface);
  font: var(--mat-sys-body-medium);

  // Reset the user agent margin.
  margin: 0;
}

/* ==========================================================================
   ESTILOS GLOBALES Y VARIABLES DE DISEÑO
   ========================================================================== */


:root {
  // --- Core Palette ---
  --color-primary: #E74C3C; // Tu Rojo específico
  --color-primary-dark: #C0392B;
  --color-primary-light: #FADBD8;
  --color-secondary: #555555; // Gris Principal
  --color-secondary-light: #BBBBBB; // Gris Claro

  // --- Accent & UI Colors ---
  --color-accent: #3498DB; // Tu Azul específico
  --color-text-primary: #333333; // Texto Oscuro
  --color-text-secondary: #7F8C8D; // Texto Secundario Gris
  --color-background: #F8F9FA; // Fondo Página
  --color-surface: #ffffff; // Fondo Tarjetas/Modales
  --color-border: #EBEBEB; // Bordes/Divisores

  // --- Semantic State Colors ---
  --color-success: #2ECC71;
  --color-success-dark: #27AE60;
  --color-success-light: #D5F5E3;
  --color-warning: #F39C12;
  --color-warning-dark: #D35400;
  --color-warning-light: #FAE5D3;
  --color-info: var(--color-accent); // Reusa Azul Acento
  --color-info-dark: #2980B9;
  --color-info-light: #D6EAF8;
  --color-danger: var(--color-primary); // Reusa Rojo Primario
  --color-danger-dark: var(--color-primary-dark);
  --color-danger-light: var(--color-primary-light);

  // --- Design Tokens ---
  --font-family-base: 'Poppins', sans-serif; // Tu fuente principal
  --border-radius: 8px;
  --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.08);

  // Opcional: Variable RGB para opacidad (calculada de #E74C3C)
  --color-primary-rgb: 231, 76, 60;
  --mat-sys-primary: #E74C3C !important; // Tu rojo
  --mat-sys-on-primary: white !important;

}

/* ==========================================================================
   BASE & RESET STYLES
   ========================================================================== */

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html,
body {
  height: 100%;
}

body {
  font-family: var(--font-family-base); // Aplica tu fuente Poppins
  background-color: var(--color-background);
  color: var(--color-text-primary);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  margin: 0;
}

// Base heading styles
h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: 600;
  margin-bottom: 0.75rem;
  color: var(--color-text-primary);
  line-height: 1.3;
}

// Estilo global para divisores de Material
mat-divider {
  border-top-color: var(--color-border) !important; // Usa !important si es necesario
}

// Intento de aplicar fuente global
body,
button,
input,
select,
textarea,
mat-label,
mat-option,
.mdc-list-item__primary-text,
.mdc-list-item__secondary-text {
  font-family: var(--font-family-base) !important; // Usar !important con cuidado aquí
}


/* ==========================================================================
   SOBRESCRITURAS GLOBALES PARA COMPONENTES MATERIAL (Usando Variables CSS)
   ========================================================================== */

// --- Botones Primarios (mat-flat-button color="primary") ---
.mat-mdc-button.mat-primary,
.mat-mdc-raised-button.mat-primary,
.mat-mdc-flat-button.mat-primary {
  --mdc-protected-button-container-color: var(--color-primary);
  --mdc-protected-button-label-text-color: white;

  &:hover {
    --mdc-protected-button-container-color: var(--color-primary-dark);
  }
}

// --- Botones Stroked Primarios (mat-stroked-button color="primary") ---
.mat-mdc-outlined-button.mat-primary {
  --mdc-outlined-button-label-text-color: var(--color-primary);
  --mdc-outlined-button-outline-color: var(--color-primary);

  &:hover:not(:disabled) {
    // Evita hover en disabled
    background-color: var(--color-primary-light);
  }
}

// --- Botones Icono Primarios (mat-icon-button color="primary") ---
.mat-mdc-icon-button.mat-primary {
  --mdc-icon-button-icon-color: var(--color-primary);
  // Override ripple color for primary icon buttons if needed
  --mat-mdc-button-persistent-ripple-color: var(--color-primary);

  &:hover:not(:disabled) {
    background-color: var(--color-primary-light);
  }
}

// --- Botones Icono Warn (mat-icon-button color="warn") ---
// Asegura que use tu color primario/danger
.mat-mdc-icon-button.mat-warn {
  --mdc-icon-button-icon-color: var(--color-danger);
  --mat-mdc-button-persistent-ripple-color: var(--color-danger);

  &:hover:not(:disabled) {
    background-color: var(--color-danger-light);
  }
}

// --- Barra de Progreso ---
mat-progress-bar {
  --mdc-linear-progress-active-indicator-color: var(--color-primary);
  --mdc-linear-progress-track-color: var(--color-primary-light);
}

// --- Calendario / Datepicker ---
.mat-datepicker-content {
  .mat-calendar-body-selected {
    background-color: var(--color-primary);
    color: white;
  }

  .mat-calendar-body-cell.mat-calendar-body-in-range::before {
    background: var(--color-primary-light);
  }

  .mat-calendar-body-cell.mat-calendar-body-range-start:not(.mat-calendar-body-range-end)::after,
  .mat-calendar-body-cell.mat-calendar-body-range-end:not(.mat-calendar-body-range-start)::after {
    background: var(--color-primary);
  }

  .mat-calendar-body-today {
    border-color: var(--color-primary);
  }
}

mat-datepicker-toggle button.mat-mdc-icon-button {
  --mdc-icon-button-icon-color: var(--color-primary);
}

.mat-mdc-date-range-input-separator {
  color: var(--color-primary);
}

// --- Slide Toggle (mat-slide-toggle color="primary") ---
.mat-mdc-slide-toggle.mat-primary {
  --mdc-switch-selected-handle-color: var(--color-primary);
  --mdc-switch-selected-track-color: var(--color-primary); // Controla el track en estado ON
  --mat-switch-selected-track-opacity: 0.5; // Ajusta la opacidad del track en ON
  // Colores de hover/focus/pressed (opcional, puedes dejarlos por defecto o ajustarlos)
  --mdc-switch-selected-focus-handle-color: var(--color-primary);
  --mdc-switch-selected-hover-handle-color: var(--color-primary);
  --mdc-switch-selected-pressed-handle-color: var(--color-primary);
  // También puedes definir los colores del estado "unselected" si quieres
  // --mdc-switch-unselected-track-color: var(--color-secondary-light);
}

// --- Checkbox (mat-checkbox color="primary") ---
.mat-mdc-checkbox.mat-primary {
  --mdc-checkbox-selected-icon-color: var(--color-primary); // Color del check
  --mdc-checkbox-selected-focus-icon-color: var(--color-primary);
  --mdc-checkbox-selected-hover-icon-color: var(--color-primary);
  --mdc-checkbox-selected-pressed-icon-color: var(--color-primary);
  // Color cuando está seleccionado y deshabilitado
  --mdc-checkbox-disabled-selected-icon-color: rgba(var(--color-primary-rgb, 231, 76, 60), 0.4); // Usa tu variable RGB
}

// --- Radio Button (mat-radio-button color="primary") ---
.mat-mdc-radio-button.mat-primary {
  --mdc-radio-selected-icon-color: var(--color-primary); // Color del círculo interior
  // Colores de hover/focus/pressed
  --mdc-radio-selected-focus-icon-color: var(--color-primary);
  --mdc-radio-selected-hover-icon-color: var(--color-primary);
  --mdc-radio-selected-pressed-icon-color: var(--color-primary);
  // Color del círculo exterior (outline)
  // --mdc-radio-unselected-focus-icon-color: var(--color-primary); // Ejemplo
}

// --- Tabs (mat-tab-group color="primary") ---
.mat-mdc-tab-group.mat-primary,
.mat-mdc-tab-nav-bar.mat-primary {
  --mdc-tab-indicator-active-indicator-color: var(--color-primary); // Underline color
  --mat-tab-header-active-label-text-color: var(--color-primary); // Active tab text
  --mat-tab-header-inactive-label-text-color: var(--color-text-secondary); // Inactive tab text
  --mat-tab-header-active-ripple-color: var(--color-primary-light);
  --mat-tab-header-active-focus-indicator-color: var(--color-primary);
  --mat-tab-header-active-hover-indicator-color: var(--color-primary);
}

// --- Form Field Focus Color ---
.mat-mdc-form-field.mat-focused {
  // Color de la etiqueta flotante y el borde/subrayado en focus
  --mdc-text-field-focus-input-control-outline-color: var(--color-primary); // Outline border
  --mdc-text-field-focus-active-indicator-color: var(--color-primary); // Standard/Fill underline
  --mat-mdc-form-field-label-color: var(--color-primary); // Floating label
  --mdc-text-field-caret-color: var(--color-primary); // Input cursor
}

.mat-mdc-select.mat-focused:not(.mat-form-field-invalid) .mdc-line-ripple::after {
  border-bottom-color: var(--color-primary); // Underline for select
}

.mat-mdc-select.mat-focused .mat-mdc-select-arrow {
  color: var(--color-primary); // Arrow color for select
}

// --- Tooltip Background ---
// (Requiere ::ng-deep o ponerlo en styles.scss global fuera de :root)
// Si este archivo ES styles.scss, puedes ponerlo aquí:
.mat-mdc-tooltip {
  --mdc-plain-tooltip-container-color: var(--color-secondary); // Fondo del tooltip (Gris oscuro)
  --mdc-plain-tooltip-supporting-text-color: white; // Texto del tooltip
  font-family: var(--font-family-base) !important; // Asegura la fuente
}